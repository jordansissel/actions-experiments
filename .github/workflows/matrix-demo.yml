name: matrix demo

on:
  workflow_dispatch:

jobs:
  demo:
    name: Demo
    runs-on: ubuntu-latest

    outputs:
      data: ${{ steps.setter.outputs.* }}

    strategy:
      matrix:
        foo: [ one, two, three ]

    steps:
      - name: "Go: ${{ matrix.foo }}"
        id: setter
        run: |
          echo "foo-${{ matrix.index }}=${{ matrix.foo }}"
  
  summary:
    needs: [ demo ]
    name: summary
    runs-on: ubuntu-latest

    steps:
      - name: summary
        run: |
          echo "Demo outputs"
          echo "${{ toJSON(needs.demo.outputs) }}"

